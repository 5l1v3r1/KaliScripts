#!/bin/bash

echo
echo -e "\e[1m\e[32mUpdating Packages\e[39m"
echo
apt update -y &&
apt upgrade -y &&
apt full-upgrade -y &&
apt autoremove -y
apt clean

echo
pushd /opt >/dev/null

for dir in `find . -type d`
do
	if [ -d "$dir/.git" ]; then
		echo -e "\e[1m\e[32mUpdating $dir\e[39m"
		pushd "$dir" > /dev/null && git pull
		if [ -f "update.sh" ]; then
	                ./update.sh
	        fi
		popd >/dev/null
		echo
	fi
done

popd >/dev/null
